Problem occurs when user clicks the apply button after signing the agreement.

What happens behind the scenes?

onDemandsAndNeedsClick {
 - Gets a list of applied products
 - validation
 - show loading demands and needs animation
    
    demandsAndNeedsSubmit {
        - Prepares ajax data
        - makes ajax call

        Sale:getDemandsAndNeedsDocumentHtml {
            server side: 
                - Saves products
                - Delete signatures for step
                - Save question responses
                - Generate and store d&n 
                - return getDocumentHtml()
            onSuccess {
                - Removes loading animation
                - Opens jQury dialog: Apply | Print | Cancel

                Apply {
                    - saves signatures
                    - show please wait modal
                    - makes another ajax call

                    Sale:completeDemandsAndNeeds {
                        server side:
                            - saves question responses
                            - verifies if signatures exit
                            - generate and store d&n
                            - edf integration
                        onSuccess {
                            - removes loading animation
                            - calls onApplyClick function

                            onApplyClick {
                                - makes another ajax call to applt for products

                                Product:apply {
                                    server side:
                                        - validation
                                        - add data to products and all related tables
                                    onSuccess {
                                        - clear any errors
                                        - reset data and modals
                                        - remove loading animation
                                        - set status of products to complete
                                    }    
                                }
                            }
                        }    
                    }
                }
            }
        }
    }
}

Summary

onDemandsAndNeedsClick()
    demandsAndNeedsSubmit()
        -> Sale:getDemandsAndNeedsDocumentHtml
            Modal: Apply
                -> Sale:completeDemandsAndNeeds
                    onSuccess: onApplyClick()
                        -> Product:apply

3 ajax calls are made asynchronously which may create a problem of one call finishing before the other.
This behaviour can happen in any order and may change depending on the internet connection as well.
